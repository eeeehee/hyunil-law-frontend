<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="/hyunil-law-frontend/">
    <title>요금제안내 - 법무그룹 현일</title>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    <style>
        /* --- [공통] 기본 설정 --- */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Pretendard Variable", Pretendard, sans-serif; }
        body { width: 100%; overflow-x: hidden; color: #333; background-color: #fff; }
        a { text-decoration: none; color: inherit; }
        ul, li { list-style: none; }
        input, textarea, button { font-family: inherit; }

        /* --- 헤더 --- */
        header { display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto; padding: 20px 24px; height: 80px; }
        .logo img { height: 40px; }
        .nav-links a { margin-left: 30px; font-weight: 500; font-size: 16px; transition: 0.2s; }
        .nav-links a:hover { color: #2c5bf2; } 

        /* --- [1] 요금제 히어로 --- */
        .pricing-hero { text-align: center; padding: 100px 20px 60px; background-color: #fcfcfc; }
        .pricing-hero h1 { font-size: 42px; font-weight: 700; margin-bottom: 20px; color: #1a1a1a; word-break: keep-all; }
        .pricing-hero p { font-size: 18px; color: #666; line-height: 1.6; word-break: keep-all; }

        /* --- [2] 요금제 카드 --- */
        .pricing-container { max-width: 1400px; margin: 0 auto; padding: 0 20px 100px; }
        .pricing-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 20px; margin-bottom: 60px; }

        .plan-card { background: #fff; border: 1px solid #e5e5e5; border-radius: 12px; padding: 40px 24px; display: flex; flex-direction: column; transition: all 0.3s; position: relative; }
        .plan-card:hover { border-color: #333; transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
        .plan-name { font-size: 22px; font-weight: 700; margin-bottom: 15px; color: #333; }
        
        .plan-price { font-size: 28px; font-weight: 800; color: #1a1a1a; margin-bottom: 10px; }
        .plan-price span { font-size: 16px; font-weight: 400; color: #888; margin-left: 2px; }
        
 /* [수정] VAT 텍스트 스타일 */
.vat-text {
    display: block !important; /* 줄바꿈 */
    width: 100%;               /* 꽉 채우기 */
    text-align: right;         /* ★ 핵심! 오른쪽(원 아래)으로 붙이기 */
    font-size: 12px;           /* 글자 크기 조금 줄임 (밸런스) */
    color: #999;
    font-weight: 400;
    margin-top: 2px;           /* 간격 살짝 좁힘 */
    line-height: 1;
}

/* [수정] 가격 박스 스타일 */
.plan-price {
    display: block !important;
    width: fit-content;        /* ★ 핵심! 글자 길이만큼만 박스 크기 잡기 */
    text-align: left;          /* 가격 숫자는 왼쪽 정렬 */
    margin-bottom: 20px;
}   
        .plan-target { font-size: 14px; color: #555; margin-bottom: 25px; min-height: 60px; line-height: 1.5; font-weight: 600; word-break: keep-all; }
        
        .plan-features { flex: 1; margin-bottom: 30px; }
        .plan-features li { font-size: 14px; color: #666; margin-bottom: 12px; padding-left: 24px; position: relative; line-height: 1.5; word-break: keep-all; }
        .plan-features li::before {
            content: ''; position: absolute; left: 0; top: 3px; width: 16px; height: 16px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%232c5bf2' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='20 6 9 17 4 12'/%3E%3C/svg%3E");
            background-repeat: no-repeat; background-position: center;
        }
        
        .plan-btn { display: block; width: 100%; padding: 15px 0; text-align: center; border: 1px solid #333; background-color: #fff; color: #333; font-weight: 700; border-radius: 6px; transition: 0.2s; cursor: pointer; }
        .plan-btn:hover { background-color: #333; color: #fff; }

        .single-plan-box { background: linear-gradient(to right, #242736, #1a1a2e); color: #fff; border-radius: 16px; padding: 40px 50px; display: flex; justify-content: space-between; align-items: center; max-width: 900px; margin: 0 auto; box-shadow: 0 10px 30px rgba(0,0,0,0.1); position: relative; overflow: hidden; }
        .single-plan-box::after { content: ''; position: absolute; top: -50%; right: -10%; width: 300px; height: 300px; background: radial-gradient(circle, rgba(44, 91, 242, 0.15) 0%, rgba(0,0,0,0) 70%); pointer-events: none; }
        .single-text h3 { font-size: 24px; font-weight: 700; margin-bottom: 10px; color: #fff; }
        .single-text p { font-size: 16px; color: #ccc; }
        .single-btn { background-color: #fff; color: #1a1a1a; padding: 16px 36px; border-radius: 8px; font-weight: 700; font-size: 16px; transition: all 0.3s; z-index: 2; box-shadow: 0 4px 12px rgba(0,0,0,0.1); cursor: pointer; text-decoration: none; display: inline-block; }
        .single-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(255,255,255,0.2); }

        /* --- [3] 서비스 안내 --- */
        .service-info-section { background-color: #fff; padding: 0 20px 80px; max-width: 1200px; margin: 0 auto; }
        .info-box { background-color: #f8f9fa; padding: 40px; border-radius: 12px; }
        .info-title { font-size: 18px; font-weight: 700; margin-bottom: 20px; color: #333; }
        .info-list li { font-size: 15px; color: #555; margin-bottom: 10px; position: relative; padding-left: 15px; line-height: 1.6; }
        .info-list li::before { content: '•'; position: absolute; left: 0; color: #999; }

        /* --- [4] 하단 문의 폼 섹션 --- */
        .inquiry-section { background-color: #fff; padding: 100px 20px 150px; border-top: 1px solid #eee; }
        .inquiry-container { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; gap: 80px; }
        .inquiry-left { flex: 1; padding-top: 20px; }
        .inquiry-left h2 { font-size: 32px; font-weight: 700; color: #1a1a1a; margin-bottom: 20px; line-height: 1.3; }
        .phone-display { font-size: 56px; font-weight: 800; color: #333; margin-bottom: 30px; letter-spacing: -1px; }
        .inquiry-desc { font-size: 16px; color: #666; line-height: 1.6; }
        .inquiry-right { flex: 1; max-width: 600px; }
        .form-group { margin-bottom: 24px; }
        .form-label { display: block; font-size: 15px; font-weight: 700; color: #333; margin-bottom: 10px; }
        .required { color: #ff4d4f; margin-left: 2px; }
        .radio-group { display: flex; gap: 20px; flex-wrap: wrap; }
        .radio-item { display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 15px; color: #555; }
        .radio-item input[type="radio"] { width: 18px; height: 18px; accent-color: #333; cursor: pointer; }
        .phone-inputs { display: flex; align-items: center; gap: 10px; }
        .phone-box { width: 100%; height: 48px; border: 1px solid #ddd; border-radius: 4px; padding: 0 15px; font-size: 16px; outline: none; transition: 0.2s; text-align: center; }
        .phone-dash { color: #999; }
        .input-text { width: 100%; height: 150px; border: 1px solid #ddd; border-radius: 4px; padding: 15px; font-size: 15px; outline: none; resize: none; }
        .phone-box:focus, .input-text:focus { border-color: #333; }
        .privacy-group { display: flex; justify-content: space-between; align-items: center; margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px; }
        .check-label { display: flex; align-items: center; gap: 8px; font-size: 15px; color: #555; cursor: pointer; }
        .check-label input { width: 18px; height: 18px; accent-color: #333; cursor: pointer; }
        .privacy-link { font-size: 14px; color: #888; text-decoration: underline; cursor: pointer; }
        .submit-btn { width: 100%; height: 56px; background-color: #fff; color: #333; border: 1px solid #333; font-size: 16px; font-weight: 700; border-radius: 4px; cursor: pointer; transition: 0.2s; margin-top: 20px; }
        .submit-btn:hover { background-color: #333; color: #fff; }

        /* --- [5] 팝업 (모달) 스타일 --- */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); z-index: 9999; }
        .modal-content { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 600px; background-color: #fff; padding: 40px; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .modal-title { font-size: 20px; font-weight: 700; color: #1a1a1a; }
        .close-btn { font-size: 28px; cursor: pointer; color: #999; line-height: 1; }
        .close-btn:hover { color: #333; }
        .modal-form .form-group { margin-bottom: 20px; }
        .modal-form .input-box { width: 100%; height: 46px; border: 1px solid #ddd; border-radius: 4px; padding: 0 15px; font-size: 15px; }
        .privacy-box { width: 100%; height: 150px; overflow-y: auto; border: 1px solid #eee; background-color: #f9f9f9; padding: 15px; font-size: 13px; color: #555; line-height: 1.6; margin-bottom: 10px; border-radius: 4px; }
        .modal-submit-btn { width: 100%; height: 50px; background-color: #fff; border: 1px solid #333; color: #333; font-weight: 700; font-size: 16px; border-radius: 4px; cursor: pointer; margin-top: 10px; }
        .modal-submit-btn:hover { background-color: #333; color: #fff; }

        /* --- 푸터 --- */
        footer { background-color: #2c2c2c; color: #ccc; padding: 60px 20px; font-size: 14px; text-align: center; border-top: 1px solid #444; }
        .footer-container { max-width: 1200px; margin: 0 auto; display: flex; flex-direction: column; align-items: center; gap: 20px; }
        .social-icons { display: flex; gap: 15px; margin-bottom: 10px; }
        .social-icons a { display: inline-block; width: 36px; height: 36px; background-color: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; overflow: hidden; transition: 0.2s; }
        .social-icons a:hover { transform: translateY(-3px); }
        .social-icons img { width: 20px; height: 20px; object-fit: contain; }
        .footer-info h2 { font-size: 16px; font-weight: 700; color: #fff; margin-bottom: 15px; }
        .info-row { margin-bottom: 8px; line-height: 1.6; }
        .footer-links a { margin: 0 10px; color: #ccc; }
        .footer-links a.bold { font-weight: 700; color: #fff; }

        @media (max-width: 1200px) { .pricing-grid { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 900px) {
            .pricing-grid { grid-template-columns: repeat(2, 1fr); }
            .inquiry-container { flex-direction: column; gap: 50px; }
            .inquiry-right { max-width: 100%; }
            .single-plan-box { flex-direction: column; text-align: center; gap: 30px; padding: 40px 30px; }
            .modal-content { width: 90%; padding: 25px; }
        }
        @media (max-width: 600px) { .pricing-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
<!-- Header will be loaded by Header.js -->

    <section class="pricing-hero">
        <h1>기업의 상황에 딱 맞는 법률 파트너십</h1>
        <p>스타트업부터 중견기업까지, 현일의 법률 자문 요금제는 문제가 생기기 전을 대비합니다.<br>매월 고정비로 리스크를 예방하세요.</p>
    </section>

    <section class="pricing-container">
        <div class="pricing-grid">
            <div class="plan-card">
                <div class="plan-name">Basic</div>
              <div class="plan-price">
    월 500,000<span>원</span>
    <span class="vat-text">(VAT 별도)</span>
</div>
                <div class="plan-target">1인 기업·초기 스타트업을 위한 기본 법률 안전장치</div>
                <ul class="plan-features">
                    <li>자문 또는 계약서 검토 월 1회 제공</li>
                    <li>법률 리스크를 최소 비용으로 관리하고 싶은 분들께 적합</li>
                </ul>
                <button class="plan-btn" onclick="openModal('Basic')">선택하기</button>
            </div>

            <div class="plan-card">
                <div class="plan-name">Standard</div>
                <div class="plan-price">월 1,000,000<span>원</span><span class="vat-text">(VAT 별도)</span></div>
                <div class="plan-target">작지만 빠르게 성장하는 기업의 ‘필수 법률 파트너’</div>
                <ul class="plan-features">
                    <li>자문 또는 계약서 검토 월 3회</li>
                    <li>대표 변호사 직접상담 월 1회</li>
                    <li>인사·계약·거래 등 초기 리스크를 안정적으로 관리</li>
                </ul>
                <button class="plan-btn" onclick="openModal('Standard')">선택하기</button>
            </div>

            <div class="plan-card">
                <div class="plan-name">Pro</div>
                <div class="plan-price">월 1,500,000<span>원</span><span class="vat-text">(VAT 별도)</span></div>
                <div class="plan-target">중소기업·협회·병원·학원 등 복잡한 법률 환경에 최적화된 솔루션</div>
                <ul class="plan-features">
                    <li>자문 또는 계약서 검토 월 5회</li>
                    <li>변호사 직접상담 월 2회</li>
                    <li><strong>연간 중요 법률 리스크 리포트</strong></li> 
                    <li>내부 규정·노무·분쟁 예방 체계적 지원</li>
                </ul>
                <button class="plan-btn" onclick="openModal('Pro')">선택하기</button>
            </div>

            <div class="plan-card">
                <div class="plan-name">Premium</div>
                <div class="plan-price">월 2,000,000<span>원</span><span class="vat-text">(VAT 별도)</span></div>
                <div class="plan-target">리스크 관리가 중요한 기업을 위한 ‘최고 수준의 법률 케어’</div>
                <ul class="plan-features">
                    <li>자문 또는 계약서 검토 월 8회</li>
                    <li>변호사 직접상담 월 5회</li>
                    <li><strong>분기/연간 중요 리스크 리포트</strong></li>
                    <li>상시 법무팀처럼 신속·정밀한 대응 제공</li>
                </ul>
                <button class="plan-btn" onclick="openModal('Premium')">선택하기</button>
            </div>

            <div class="plan-card" style="background-color: #1a1a1a; border-color:#1a1a1a;">
                <div class="plan-name" style="color:#fff;">Enterprise</div>
                <div class="plan-price" style="color:#fff;">문의하기</div>
                <div class="plan-target" style="color:#aaa;">맞춤형 전담팀이 필요한 법인</div>
                <ul class="plan-features">
                    <li style="color:#ddd;">무제한 맞춤형 자문</li>
                    <li style="color:#ddd;">전담 변호사 팀 배정</li>
                    <li style="color:#ddd;"><strong>분기/연간 통합 리포트 (전사/부서별)</strong></li>
                </ul>
                <button class="plan-btn" style="background:#fff; color:#000; border:none;" onclick="openModal('Enterprise')">문의하기</button>
            </div>
        </div>

        <div class="single-plan-box">
            <div class="single-text">
                <h3>정기 구독이 부담스럽다면?</h3>
                <p>필요할 때만 이용하는 <b>단건 상담</b>을 이용해보세요.</p>
            </div>
            <a href="javascript:void(0)" class="single-btn" onclick="openModal('Single')">단건 상담 문의하기</a>
        </div>
    </section>

    <section class="service-info-section">
        <div class="info-box">
            <h3 class="info-title">서비스 이용 및 리포트 안내</h3>
            <ul class="info-list">
                <li><strong>[채널톡 운영 정책]</strong> 우측 하단 채널톡은 <b>시스템 오류, 결제, 이용 문의 등 일반 CS 전용</b>입니다. 법률적인 판단이 필요한 자문은 <b>[자문 신청하기]</b> 메뉴를 통해 접수해주시기 바랍니다.</li>
                <li><strong>[리포트 제공 정책]</strong> Pro 등급 이상에게 제공되는 정기 리포트는 기업의 <b>중요 법률 이슈와 핵심 자문 이력</b>을 선별하여 PDF로 제공됩니다.</li>
                <li>변호사 직접상담은 1회당 총 30분 내, 사전 예약 필수입니다.</li>
                <li>계약서 검토는 1회당 2시간 분량이 기본이며, 초과 시 횟수가 추가 차감될 수 있습니다.</li>
                <li>모든 자문은 영업일 기준 7일 이내 회신을 원칙으로 합니다.</li>
                <li>기업자문은 영어 상담까지 가능합니다. (중국어/일본어 자문은 별도 요금 지원)</li>
                <li>플랜별 최대 사용자가 정해져 있습니다. Basic 3인, standard 7인, Pro 12인, Premium 17인이며, 초과 이용자 1인당 <strong>월 1만원(VAT 별도)</strong>이 별도 청구됩니다.</li>
                <li>중도 해지 시 위약금 10% 발생합니다.</li>
            </ul>
        </div>
    </section>

    <section class="inquiry-section">
        <div class="inquiry-container">
            <div class="inquiry-left">
                <h2>당신의 기업, 법적으로 안전한가요?</h2>
                <div class="phone-display">1533-6092</div>
                <p class="inquiry-desc">
                    우리 회사에 맞을지 고민된다면 상담부터 시작해보세요.<br>
                    지금 신청하시면 빠른 확인 후 전문가가 연락드립니다.
                </p>
            </div>
            <div class="inquiry-right">
                <form onsubmit="return false;">
                    <div class="form-group">
                        <div class="radio-group">
                            <label class="radio-item"><input type="radio" name="inq_category" value="계약" checked> 계약</label>
                            <label class="radio-item"><input type="radio" name="inq_category" value="노무"> 노무</label>
                            <label class="radio-item"><input type="radio" name="inq_category" value="채권"> 채권</label>
                            <label class="radio-item"><input type="radio" name="inq_category" value="IP"> IP</label>
                            <label class="radio-item"><input type="radio" name="inq_category" value="기타"> 기타</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">전화번호 <span class="required">•</span></label>
                        <div class="phone-inputs">
                            <input type="text" class="phone-box" id="inq_phone_1" maxlength="3">
                            <span class="phone-dash">-</span>
                            <input type="text" class="phone-box" id="inq_phone_2" maxlength="4">
                            <span class="phone-dash">-</span>
                            <input type="text" class="phone-box" id="inq_phone_3" maxlength="4">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">문의내용 <span class="required">•</span></label>
                        <textarea class="input-text" id="inq_content"></textarea>
                    </div>
                    <div class="form-group privacy-group">
                        <label class="check-label">
                            <input type="checkbox" id="inq_agree"> 개인정보 수집 및 이용에 동의합니다.
                        </label>
                        <a href="../../pages/public/privacy_consent.html" target="_blank" class="privacy-link" onclick="window.open(this.href, 'consentPop', 'width=600,height=800'); return false;">보기</a>
                    </div>
                    <button type="button" class="submit-btn" onclick="submitInquiry()">상담신청서 제출</button>
                </form>
            </div>
        </div>
    </section>

    <footer>
        <div class="footer-container">
            <div class="social-icons">
                <a href="https://blog.naver.com/entrustlaw" target="_blank">
                    <img src="../../assets/img/naver-blog.png" alt="네이버 블로그">
                </a>
                <a href="http://pf.kakao.com/_MxbdNn" target="_blank">
                    <img src="../../assets/img/icon_kakao.png" alt="카카오">
                </a>
                <a href="https://www.instagram.com/hyunillaw_official?igsh=ZTN6MHM1NmU5NjR4" target="_blank">
                    <img src="../../assets/img/icon_insta.png" alt="인스타">
                </a>
            </div>
            <div class="footer-info">
                <h2>법무그룹 현일 기업자문센터</h2>
                <div class="info-row">
                    대표변호사 : 신현정 <span>|</span> 주소 : 서울특별시 강남구 테헤란로 521 29층 suite 39-c <span>|</span> 대표번호 : 1533-6092
                </div>
                <div class="info-row">
                    사업자등록번호 : 211-51-06741 <span>|</span> 통신판매업신고번호 : 2025-서울강남-04334
                </div>
            </div>
            <div class="footer-links">
                <a href="../../pages/public/terms.html">이용약관</a> <span>|</span> <a href="../../pages/public/privacy.html" class="bold">개인정보처리방침</a>
            </div>
            <p class="copyright">Copyright ⓒ 2025 법무그룹 현일 기업자문센터 All rights reserved.</p>
        </div>
    </footer>

    <div id="paymentModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">결제 요청</div>
                <div class="close-btn" onclick="closeModal()">✕</div>
            </div>
            
            <form class="modal-form" onsubmit="return false;">
                <input type="hidden" id="selectedPlanType">

                <div class="form-group" id="modalPlanSelection">
                    <div class="radio-group" style="gap: 15px;">
                        <label class="radio-item"><input type="radio" name="modal_plan" value="Basic" id="radio_Basic"> Basic</label>
                        <label class="radio-item"><input type="radio" name="modal_plan" value="Standard" id="radio_Standard"> Standard</label>
                        <label class="radio-item"><input type="radio" name="modal_plan" value="Pro" id="radio_Pro"> Pro</label>
                        <label class="radio-item"><input type="radio" name="modal_plan" value="Premium" id="radio_Premium"> Premium</label>
                        <label class="radio-item"><input type="radio" name="modal_plan" value="Enterprise" id="radio_Enterprise"> Enterprise</label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">기업명 <span class="required">•</span></label>
                    <input type="text" class="input-box" id="modal_company">
                </div>

                <div class="form-group">
                    <label class="form-label">연락처 <span class="required">•</span></label>
                    <div class="phone-inputs">
                        <input type="text" class="phone-box" id="modal_phone_1" maxlength="3">
                        <span class="phone-dash">-</span>
                        <input type="text" class="phone-box" id="modal_phone_2" maxlength="4">
                        <span class="phone-dash">-</span>
                        <input type="text" class="phone-box" id="modal_phone_3" maxlength="4">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">개인정보 수집 및 이용 동의 <span class="required">•</span></label>
                    <div class="privacy-box">
                        <strong>[개인정보 수집·이용 동의서]</strong><br><br>
                        <strong>법무그룹 현일</strong> (이하 ‘회사’)는 「개인정보 보호법」 등 관련 법령에 따라, 상품/서비스 가입 신청자의 개인정보를 아래와 같이 수집·이용하고자 합니다.<br><br>
                        1. 수집·이용 목적: 상품/서비스 가입 및 이용자 식별, 상담, 공지사항 전달<br>
                        2. 수집 항목: 회사명, 휴대전화번호<br>
                        3. 보유 기간: 서비스 가입 기간 동안 보유 (탈퇴 시 파기)<br><br>
                        동의를 거부할 수 있으나, 거부 시 서비스 가입이 제한될 수 있습니다.
                    </div>
                    <label class="check-label" style="margin-top: 5px;">
                        <input type="checkbox" id="modal_agree"> 개인정보 수집 및 이용에 동의합니다.
                    </label>
                </div>

                <button type="button" class="modal-submit-btn" onclick="submitModalForm()">작성</button>
            </form>
        </div>
    </div>

    <script src="../../js/channel-service.js"></script>

    <script type="module">
        import { auth, users, requireAuth } from "../../js/api.js";
        // REMOVED: Firebase config import
        // REMOVED: Firebase SDK import
        // REMOVED: Firebase SDK import

        window.openModal = function(planName) {
            document.getElementById('paymentModal').style.display = 'block';
            document.getElementById('selectedPlanType').value = planName; 
            
            const titleElem = document.getElementById('modalTitle');
            const planSelectionDiv = document.getElementById('modalPlanSelection');

            if (planName === 'Single') {
                titleElem.innerText = '단건 상담 문의';
                planSelectionDiv.style.display = 'none';
                const radios = document.getElementsByName('modal_plan');
                for(let r of radios) r.checked = false;
            } else {
                planSelectionDiv.style.display = 'block';
                if (planName === 'Enterprise') titleElem.innerText = '상담 문의';
                else titleElem.innerText = '결제 요청';
                const radio = document.getElementById('radio_' + planName);
                if (radio) radio.checked = true;
            }
        }

        window.closeModal = function() {
            document.getElementById('paymentModal').style.display = 'none';
        }

        window.onclick = function(event) {
            const modal = document.getElementById('paymentModal');
            if (event.target == modal) modal.style.display = "none";
        }

        window.submitInquiry = async function() {
            const p1 = document.getElementById('inq_phone_1').value;
            const p2 = document.getElementById('inq_phone_2').value;
            const p3 = document.getElementById('inq_phone_3').value;
            const content = document.getElementById('inq_content').value;
            const agree = document.getElementById('inq_agree').checked;
            const catRadio = document.querySelector('input[name="inq_category"]:checked');
            const category = catRadio ? catRadio.value : "기타";

            if (!p1 || !p2 || !p3 || !content) { alert("내용 입력 필요"); return; }
            if (!agree) { alert("동의 필요"); return; }

            const phone = `${p1}-${p2}-${p3}`;
            const btn = document.querySelector('.submit-btn');
            btn.innerText = "전송 중..."; btn.disabled = true;

            try {
                await addDoc(collection(db, "posts"), {
                    category: 'guest', title: `[일반상담] ${category} 문의`, content: content,
                    authorName: "비회원", contact: phone, status: 'waiting', createdAt: new Date()
                });
                alert("상담 신청 완료"); location.reload();
            } catch(e) { console.error(e); alert("오류"); btn.innerText = "제출"; btn.disabled = false; }
        }

        window.submitModalForm = async function() {
            const company = document.getElementById('modal_company').value;
            const p1 = document.getElementById('modal_phone_1').value;
            const p2 = document.getElementById('modal_phone_2').value;
            const p3 = document.getElementById('modal_phone_3').value;
            const agree = document.getElementById('modal_agree').checked;
            let plan = ""; 
            const hiddenType = document.getElementById('selectedPlanType').value;

            if (hiddenType === 'Single') plan = 'Single';
            else {
                const planRadio = document.querySelector('input[name="modal_plan"]:checked');
                if (planRadio) plan = planRadio.value; else plan = hiddenType;
            }

            if (!company || !p1 || !p2 || !p3) { alert("입력 필요"); return; }
            if (!agree) { alert("동의 필요"); return; }

            const phone = `${p1}-${p2}-${p3}`;
            const btn = document.querySelector('.modal-submit-btn');
            btn.innerText = "처리 중..."; btn.disabled = true;

            try {
                await addDoc(collection(db, "posts"), {
                    category: 'inquiry', title: `[가입문의] ${plan} 플랜`,
                    content: `${company} 에서 ${plan} 가입 요청`, authorName: company, contact: phone,
                    status: 'waiting', createdAt: new Date()
                });
                alert("신청 접수 완료"); closeModal(); location.reload();
            } catch(e) { console.error(e); alert("오류"); btn.innerText = "작성"; btn.disabled = false; }
        }
    </script>

    <script type="module">
        import { loadHeader } from "/js/Header.js";
        import { loadFooter } from "/js/Footer.js";
        
        // 공통 헤더, 푸터 로드
        loadHeader();
        loadFooter();
    </script>
</body>
</html>