<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>추심 ?�건 관�?(Process) - ADMIN</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    <script src="../../js/admin_sidebar.js"></script>
    <style>
        body { display:flex; background:#f5f7fa; font-family:"Pretendard Variable", sans-serif; }
        .main-content { flex:1; margin-left:260px; padding:40px; }
        
        /* 카드 ?��???*/
        .case-card { background:white; padding:25px; border-radius:12px; margin-bottom:20px; border-left:6px solid #ddd; box-shadow:0 2px 10px rgba(0,0,0,0.03); position: relative; }
        .case-card.step-0 { border-left-color: #aaa; } /* ?�수 */
        .case-card.step-1 { border-left-color: #fa8c16; } /* ?�용증명 */
        .case-card.step-2 { border-left-color: #cf1322; } /* 집행권원?�보 */
        .case-card.step-3 { border-left-color: #722ed1; } /* 강제조회 */
        .case-card.step-4 { border-left-color: #52c41a; } /* 종결 */
        
        .case-header { display:flex; justify-content:space-between; margin-bottom:15px; align-items:center; }
        .case-title { font-size:18px; font-weight:800; color:#333; }
        .case-amount { font-size:16px; color:#cf1322; font-weight:800; }
        
        .meta-info { font-size:13px; color:#666; margin-bottom:15px; background:#f9f9f9; padding:10px; border-radius:6px; }
        
        /* ?�계 ?�시 �?*/
        .step-bar { display:flex; gap:5px; margin-top:15px; background:#f0f0f0; padding:8px; border-radius:6px; }
        .step-item { flex:1; text-align:center; font-size:12px; color:#999; padding:6px; border-radius:4px; transition:0.2s; }
        .step-item.active { background:white; color:#333; font-weight:800; box-shadow:0 2px 4px rgba(0,0,0,0.05); }
        
        /* ?�션 ?�역 */
        .action-area { margin-top:20px; display:flex; justify-content:space-between; align-items:center; border-top:1px solid #eee; padding-top:15px; }
        .btn { padding:8px 14px; border-radius:6px; font-size:13px; font-weight:700; cursor:pointer; border:1px solid #ddd; background:white; transition:0.2s; }
        .btn:hover { background:#f5f5f5; }
        .btn-next { background:#1a1a1a; color:white; border:none; }
        .btn-next:hover { background:#333; }
        .btn-print { background:#e6f7ff; color:#096dd9; border:1px solid #91d5ff; }

        /* ?�력 ??(?��??? */
        .input-panel { margin-top:15px; padding:15px; background:#fafafa; border:1px solid #eee; border-radius:8px; display:none; }
        .input-row { display:flex; gap:10px; margin-bottom:10px; }
        .input-row input, .input-row textarea { flex:1; padding:8px; border:1px solid #ddd; border-radius:4px; font-size:13px; }
        
        .badge-alert { background:#ff4d4f; color:white; padding:2px 6px; border-radius:4px; font-size:11px; margin-left:5px; animation: blink 2s infinite; }
        @keyframes blink { 50% { opacity: 0.5; } }
    </style>
</head>
<body>
    <script>renderAdminSidebar();</script>
    <main class="main-content">
        <h2 style="margin-bottom:20px;">??추심 ?�건 관�?(Process)</h2>
        <div id="caseList"></div>
    </main>

    <script type="module">
        import { auth, users, requireAuth, checkRole, posts, reports, payments, litigationCases, cases, leaveRequests, creditReports, expenses } from '/js/api.js';
        
        (async () => {
            if (!requireAuth()) return;
            const user = auth.getCurrentUser();
            if (!user) {
                location.href = "../../pages/public/login.html";
                return;
            }

            try {
                const userData = await users.getMe();
                
                if (!checkRole(['master', 'admin', 'general_manager', 'lawyer'])) {
                    location.href = '/pages/user/dashboard.html';
                    return;
                }
                console.log('Collection task page loaded');
            } catch (error) {
                console.error('?�이지 로드 ?�러:', error);
                alert('?�이?��? 불러?�는 �??�류가 발생?�습?�다.');
            }
        })();
        
        window.handleLogout = async function() {
            try {
                await auth.logout();
                location.href = "../../index.html";
            } catch (error) {
                console.error('로그?�웃 ?�러:', error);
            }
        };
    </script>
</body>
</html>
