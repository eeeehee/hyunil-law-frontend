<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„¤ì • - ë²•ë¬´ê·¸ë£¹ í˜„ì¼</title>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    <style>
        /* [ê´€ë¦¬ì ê³µí†µ ìŠ¤íƒ€ì¼] */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Pretendard Variable", Pretendard, sans-serif; }
        body { background-color: #f0f2f5; color: #333; display: flex; min-height: 100vh; }
        a { text-decoration: none; color: inherit; }
        ul, li { list-style: none; }
        input, select, button { font-family: inherit; }

        .sidebar { width: 260px; background-color: #1a1a2e; color: #fff; padding: 30px 20px; display: flex; flex-direction: column; position: fixed; height: 100vh; left: 0; top: 0; z-index: 100; overflow-y: auto; }
        .sidebar-brand { font-size: 20px; font-weight: 700; margin-bottom: 30px; padding-left: 10px; color: #fff; letter-spacing: 1px; }
        .sidebar-menu { list-style: none; padding: 0; margin-top: 10px; }
        .menu-category { display: flex; justify-content: space-between; align-items: center; padding: 12px 15px; color: #a6a6b5; font-size: 14px; font-weight: 700; cursor: pointer; transition: 0.2s; border-radius: 6px; margin-bottom: 2px; }
        .menu-category:hover { background-color: rgba(255, 255, 255, 0.05); color: #fff; }
        .menu-category.active { color: #fff; background-color: #2c2c45; }
        .menu-arrow { font-size: 10px; transition: 0.3s; color: #666; }
        .menu-category.open .menu-arrow { transform: rotate(180deg); color: #fff; }
        .submenu { display: none; padding-left: 10px; margin-bottom: 10px; background-color: rgba(0,0,0,0.1); border-radius: 6px; }
        .submenu li a { display: block; padding: 8px 15px 8px 32px; font-size: 13px; color: #888; border-radius: 4px; transition: 0.2s; position: relative; }
        .submenu li a:hover { color: #fff; background-color: rgba(255,255,255,0.05); }
        .submenu li a.active { color: #fff; font-weight: 700; background-color: #2c5bf2; }
        .menu-divider { border-top: 1px solid #2c2c45; margin: 15px 0; }
        .menu-link { display: block; padding: 12px 15px; border-radius: 8px; color: #a6a6b5; font-size: 14px; transition: 0.2s; }
        .menu-link:hover { background-color: #2c2c45; color: #fff; }

        .main-content { flex: 1; margin-left: 260px; padding: 40px; max-width: 1000px; }
        .page-title { font-size: 24px; font-weight: 700; color: #1a1a1a; margin-bottom: 30px; }

        /* ì„¤ì • ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        .setting-box { background: #fff; padding: 30px; border-radius: 12px; border: 1px solid #e5e5e5; margin-bottom: 30px; }
        .box-title { font-size: 18px; font-weight: 700; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 15px; }

        .form-group { margin-bottom: 20px; max-width: 500px; }
        .form-label { display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #555; }
        .input-box { width: 100%; height: 46px; border: 1px solid #ddd; border-radius: 6px; padding: 0 15px; font-size: 15px; outline: none; }
        .input-box:focus { border-color: #1a1a2e; }

        .btn-save { background-color: #1a1a2e; color: #fff; border: none; padding: 10px 24px; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 14px; }
        .btn-save:hover { background-color: #333; }

        /* ê´€ë¦¬ì ëª©ë¡ í…Œì´ë¸” */
        .admin-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .admin-table th, .admin-table td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; font-size: 14px; }
        .admin-table th { background-color: #f9f9f9; color: #555; font-weight: 600; }
        .btn-delete { color: #ff4d4f; background: none; border: none; cursor: pointer; font-size: 12px; text-decoration: underline; margin-left: 10px; }
        
        /* ë±ƒì§€ ìŠ¤íƒ€ì¼ */
        .badge-role { padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: 700; }
        .role-admin { background: #1a1a2e; color: #fff; } /* ëŒ€í‘œ */
        .role-gm { background: #e6fffb; color: #006d75; border: 1px solid #87e8de; } /* ê´€ë¦¬ì§ì› (ì „ì²´ê¶Œí•œ) */
        .role-lawyer { background: #e6f7ff; color: #1890ff; border: 1px solid #91d5ff; } /* ë³€í˜¸ì‚¬ (ì œí•œ) */

        /* ëª¨ë‹¬ */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 999; }
        .modal-content { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 450px; background-color: #fff; padding: 30px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .close-btn { float: right; font-size: 24px; cursor: pointer; margin-top: -10px; }
        .modal-h { font-size: 18px; font-weight: 700; margin-bottom: 20px; }
    </style>
</head>
<body>

<nav class="sidebar">
    <div class="sidebar-brand">ADMINISTRATOR</div>
    <ul class="sidebar-menu">
        <li>
            <div class="menu-category" onclick="toggleAdminMenu('groupCorp', this)">
                <div><span class="menu-icon">ğŸ¢</span> ê¸°ì—…ìë¬¸ì„¼í„°</div>
                <span class="menu-arrow">â–¼</span>
            </div>
            <ul id="groupCorp" class="submenu">
                <li><a href="admin.html">ğŸ“ ìë¬¸ ê´€ë¦¬ (ì „ì²´)</a></li>
                <li><a href="admin_requests.html">ğŸ“© ìš”ì²­ ê´€ë¦¬í•¨</a></li>
                <li><a href="admin_report.html">ğŸ“Š ë¦¬í¬íŠ¸ ë°œì†¡</a></li>
                <li><a href="admin_corpbilling.html">ğŸ’¸ ìë¬¸ë£Œ ì²­êµ¬/ë°œì†¡</a></li>
                <li><a href="admin_members.html">ğŸ‘¥ íšŒì›/ê¸°ì—… ê´€ë¦¬</a></li>
                <li><a href="admin_payments.html">ğŸ’³ ë§¤ì¶œ/CMS ê´€ë¦¬</a></li>
            </ul>
        </li>

        <li>
            <div class="menu-category" onclick="toggleAdminMenu('groupLitigation', this)">
                <div><span class="menu-icon">âš–ï¸</span> ì „ìì†Œì†¡/ì‚¬ê±´</div>
                <span class="menu-arrow">â–¼</span>
            </div>
            <ul id="groupLitigation" class="submenu">
                <li><a href="admin_litigation.html">ğŸ” ì „ìì†Œì†¡ ë°ì´í„° í™•ì¸</a></li>
                <li><a href="admin_clients.html">ğŸ“‡ ë‹¹ì‚¬ì(ê³ ê°) ê´€ë¦¬</a></li>
            </ul>
        </li>

        <li>
            <div class="menu-category" onclick="toggleAdminMenu('groupSpecial', this)">
                <div><span class="menu-icon">ğŸ“</span> íŒŒì‚°/ì¶”ì‹¬ ì„¼í„°</div>
                <span class="menu-arrow">â–¼</span>
            </div>
            <ul id="groupSpecial" class="submenu">
                <li><a href="admin_collection_consult.html">ğŸ’° ì±„ê¶Œ ì¶”ì‹¬ ìƒë‹´</a></li>
                <li><a href="admin_collection.html">ğŸ’° ì±„ê¶Œ ì¶”ì‹¬ ì‚¬ê±´</a></li>
                <li><a href="admin_pasan_consult.html">ğŸ“‰ íŒŒì‚°/íšŒìƒ ìƒë‹´</a></li>
                <li><a href="admin_pasan.html">ğŸ“‰ íŒŒì‚°/íšŒìƒ ì‚¬ê±´</a></li>
            </ul>
        </li>

        <li class="menu-divider"></li>

        <li><a href="admin_settings.html" class="menu-link" style="background-color: #2c2c45; color: #fff; font-weight: 700;">âš™ï¸ í™˜ê²½ ì„¤ì •</a></li>
        <li class="menu-divider"></li>
        <li><a href="/" class="menu-link">ğŸ¢ ê¸°ì—…ìë¬¸ í™ˆí˜ì´ì§€</a></li>
        <li><a href="../user/dashboard.html" class="menu-link" style="color:#2c5bf2; font-weight:700;">ğŸ–¥ï¸ ê¸°ì—…ìë¬¸ ì‚¬ìš©ì ëª¨ë“œ</a></li>
    </ul>
</nav>

<script>
    function toggleAdminMenu(id, header) {
        const submenu = document.getElementById(id);
        if(!submenu) return;
        if (submenu.style.display === "block") {
            submenu.style.display = "none";
            header.classList.remove("open");
            header.classList.remove("active");
        } else {
            submenu.style.display = "block";
            header.classList.add("open");
            header.classList.add("active");
        }
    }
</script>

    <main class="main-content">
        <h2 class="page-title">í™˜ê²½ ì„¤ì •</h2>

        <div class="setting-box">
            <h3 class="box-title">ê¸°ë³¸ ì •ë³´ ì„¤ì •</h3>
            <div class="form-group">
                <label class="form-label">ì‚¬ì´íŠ¸ëª…</label>
                <input type="text" id="siteName" class="input-box" value="ë²•ë¬´ê·¸ë£¹ í˜„ì¼ ê¸°ì—…ìë¬¸ì„¼í„°">
            </div>
            <div class="form-group">
                <label class="form-label">ëŒ€í‘œ ê´€ë¦¬ì ì´ë©”ì¼</label>
                <input type="text" id="adminEmail" class="input-box" value="" disabled style="background:#f5f5f5;">
            </div>
            <button class="btn-save" onclick="alert('ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.')">ì €ì¥í•˜ê¸°</button>
        </div>

        <div class="setting-box">
            <h3 class="box-title" style="display:flex; justify-content:space-between; align-items:center;">
                ê´€ë¦¬ì ë° ë³€í˜¸ì‚¬ ê´€ë¦¬
                <button class="btn-save" style="font-size:12px; padding:6px 12px;" onclick="openAdminModal()">+ ê´€ë¦¬ì ì¶”ê°€</button>
            </h3>
            <p style="font-size:13px; color:#666; margin-bottom:10px;">
                â€» <strong>ğŸ‘‘ ìµœê³  ê´€ë¦¬ì / ğŸ’¼ ì¼ë°˜ ê´€ë¦¬ì</strong>: ëª¨ë“  ë©”ë‰´ ì ‘ê·¼ ê°€ëŠ¥ (ë§¤ì¶œ, íšŒì›ê´€ë¦¬ í¬í•¨)<br>
                â€» <strong>âš–ï¸ ë³€í˜¸ì‚¬(Lawyer)</strong>: ìë¬¸ ë‹µë³€ ë° ìš”ì²­ ê´€ë¦¬ë§Œ ê°€ëŠ¥ (ë§¤ì¶œ ë“± ìˆ¨ê¹€ ì²˜ë¦¬)
            </p>
            <table class="admin-table">
                <thead>
                    <tr>
                        <th>ì´ë¦„</th>
                        <th>ì´ë©”ì¼</th>
                        <th>ê¶Œí•œ(Role)</th>
                        <th>ë“±ë¡ì¼</th>
                        <th>ê´€ë¦¬</th>
                    </tr>
                </thead>
                <tbody id="adminListBody">
                    <tr><td colspan="5" style="padding:20px; text-align:center; color:#888;">ë¡œë”© ì¤‘...</td></tr>
                </tbody>
            </table>
        </div>

        <div class="setting-box">
            <h3 class="box-title">âš–ï¸ ê°œì¸íšŒìƒ ìƒê³„ë¹„ ê¸°ì¤€ ê´€ë¦¬ (ì¤‘ìœ„ì†Œë“ 60%)</h3>
            <p style="font-size:13px; color:#666; margin-bottom:15px;">
                * ë§¤ë…„ ë³€ê²½ë˜ëŠ” ê¸°ì¤€ ì¤‘ìœ„ì†Œë“(60%)ì„ ì…ë ¥í•˜ë©´, <strong>ìë™ ì‘ì„±ê¸° í”„ë¡œê·¸ë¨</strong>ì— ì¦‰ì‹œ ë°˜ì˜ë©ë‹ˆë‹¤.
            </p>

            <div style="display:flex; gap:10px; align-items:flex-end; background:#f9f9f9; padding:20px; border-radius:8px;">
                <div class="form-group" style="margin:0;">
                    <label class="form-label">ì ìš© ì—°ë„</label>
                    <input type="number" id="costYear" class="input-box" placeholder="ì˜ˆ: 2026" style="width:100px;">
                </div>
                <div class="form-group" style="margin:0;">
                    <label class="form-label">1ì¸ ê°€êµ¬</label>
                    <input type="text" id="cost1" class="input-box" onkeyup="formatCurrency(this)" placeholder="ì›">
                </div>
                <div class="form-group" style="margin:0;">
                    <label class="form-label">2ì¸ ê°€êµ¬</label>
                    <input type="text" id="cost2" class="input-box" onkeyup="formatCurrency(this)" placeholder="ì›">
                </div>
                <div class="form-group" style="margin:0;">
                    <label class="form-label">3ì¸ ê°€êµ¬</label>
                    <input type="text" id="cost3" class="input-box" onkeyup="formatCurrency(this)" placeholder="ì›">
                </div>
                <div class="form-group" style="margin:0;">
                    <label class="form-label">4ì¸ ê°€êµ¬</label>
                    <input type="text" id="cost4" class="input-box" onkeyup="formatCurrency(this)" placeholder="ì›">
                </div>
                <button class="btn-save" onclick="saveLivingCost()">ê¸°ì¤€ ì €ì¥</button>
            </div>

            <div style="margin-top:20px;">
                <h4 style="font-size:14px; margin-bottom:10px;">ğŸ“œ ì €ì¥ëœ ê¸°ì¤€ ëª©ë¡</h4>
                <ul id="costHistoryList" style="list-style:none; padding:0; font-size:13px; color:#555;">
                    <li>ë¡œë”© ì¤‘...</li>
                </ul>
            </div>
        </div>
    </main>

<script>
    // ìƒê³„ë¹„ ê´€ë¦¬ ê¸°ëŠ¥ (í–¥í›„ êµ¬í˜„ ì˜ˆì •)
    window.saveLivingCost = function() {
        alert('ìƒê³„ë¹„ ê¸°ì¤€ ê´€ë¦¬ ê¸°ëŠ¥ì€ í–¥í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.');
    };

    // ìˆ«ì í¬ë§·íŒ… (ì²œ ë‹¨ìœ„ ì½¤ë§ˆ)
    window.formatCurrency = function(input) {
        let value = input.value.replace(/,/g, '');
        if (!isNaN(value) && value !== '') {
            input.value = Number(value).toLocaleString();
        }
    };
</script>

    <div id="adminInviteModal" class="modal-overlay" onclick="closeAdminModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="close-btn" onclick="closeAdminModal()">âœ•</span>
            <div class="modal-h">ê´€ë¦¬ì ê¶Œí•œ ë¶€ì—¬</div>
            
            <p style="font-size:13px; color:#666; margin-bottom:15px; line-height:1.4;">
                ì´ë¯¸ ê°€ì…ëœ íšŒì›ì˜ <strong>ì´ë©”ì¼</strong>ì„ ì…ë ¥í•˜ì—¬<br>ê´€ë¦¬ì ë˜ëŠ” ë³€í˜¸ì‚¬ ê¶Œí•œì„ ë¶€ì—¬í•©ë‹ˆë‹¤.
            </p>

            <div class="form-group" style="width:100%;">
                <label class="form-label">ëŒ€ìƒ íšŒì› ì´ë©”ì¼</label>
                <input type="text" id="targetEmail" class="input-box" placeholder="example@email.com">
            </div>

            <div class="form-group" style="width:100%;">
                <label class="form-label">ë¶€ì—¬í•  ê¶Œí•œ</label>
                <select id="targetRole" class="input-box">
                    <option value="lawyer">âš–ï¸ ë³€í˜¸ì‚¬ (ìë¬¸/ìš”ì²­ ê´€ë¦¬ë§Œ)</option>
                    <option value="general_manager">ğŸ’¼ ì¼ë°˜ ê´€ë¦¬ì (ì „ì²´ ê¶Œí•œ)</option>
                    <option value="admin">ğŸ‘‘ ìµœê³  ê´€ë¦¬ì (ì „ì²´ ê¶Œí•œ)</option>
                </select>
            </div>

            <button class="btn-save" style="width:100%; margin-top:10px;" onclick="promoteUser()">ê¶Œí•œ ë¶€ì—¬í•˜ê¸°</button>
        </div>
    </div>

    <script type="module">
        import { auth, users, requireAuth, checkRole, posts, reports, payments, litigationCases, cases, leaveRequests, creditReports, expenses } from '/js/api.js';

        (async () => {
            if (!requireAuth()) return;
            const user = auth.getCurrentUser();
            if (!user) {
                location.href = "/pages/public/login.html";
                return;
            }

            try {
                const userData = await users.getMe();

                if (!checkRole(['master', 'admin'])) {
                    alert('ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.');
                    location.href = '/pages/user/dashboard.html';
                    return;
                }

                // âœ… ë³€í˜¸ì‚¬ ê¶Œí•œì¼ ê²½ìš° íŠ¹ì • ë©”ë‰´ ìˆ¨ê¹€
                if (userData.role === 'lawyer') {
                    const hideMenus = [
                        'admin_report.html',
                        'admin_corpbilling.html',
                        'admin_members.html',
                        'admin_payments.html'
                    ];

                    hideMenus.forEach(menuFile => {
                        const menuLink = document.querySelector(`a[href="${menuFile}"]`);
                        if (menuLink) {
                            menuLink.parentElement.style.display = 'none';
                        }
                    });
                }

                // ê´€ë¦¬ì ì´ë©”ì¼ í‘œì‹œ
                document.getElementById('adminEmail').value = userData.email || '';

                // ê´€ë¦¬ì ëª©ë¡ ë¡œë“œ
                await loadAdminList();

                console.log('Settings page loaded');
            } catch (error) {
                console.error('í˜ì´ì§€ ë¡œë“œ ì—ëŸ¬:', error);
                alert('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        })();

        // ê´€ë¦¬ì ëª©ë¡ ë¡œë“œ
        async function loadAdminList() {
            try {
                const adminRoles = ['master', 'admin', 'general_manager', 'lawyer'];
                const response = await users.getAll();
                const allUsers = response.users || [];

                // ê´€ë¦¬ì ê¶Œí•œ ì‚¬ìš©ìë§Œ í•„í„°ë§
                const adminUsers = allUsers.filter(u => adminRoles.includes(u.role));

                const tbody = document.getElementById('adminListBody');
                if (adminUsers.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="5" style="padding:20px; text-align:center; color:#888;">ë“±ë¡ëœ ê´€ë¦¬ìê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
                    return;
                }

                tbody.innerHTML = adminUsers.map(u => {
                    let roleBadge = '';
                    if (u.role === 'master' || u.role === 'admin') {
                        roleBadge = '<span class="badge-role role-admin">ğŸ‘‘ ìµœê³  ê´€ë¦¬ì</span>';
                    } else if (u.role === 'general_manager') {
                        roleBadge = '<span class="badge-role role-gm">ğŸ’¼ ì¼ë°˜ ê´€ë¦¬ì</span>';
                    } else if (u.role === 'lawyer') {
                        roleBadge = '<span class="badge-role role-lawyer">âš–ï¸ ë³€í˜¸ì‚¬</span>';
                    }

                    const date = u.createdAt ? new Date(u.createdAt).toLocaleDateString('ko-KR') : '-';

                    return `
                        <tr>
                            <td>${u.managerName || u.representativeName || '-'}</td>
                            <td>${u.email}</td>
                            <td>${roleBadge}</td>
                            <td>${date}</td>
                            <td>
                                <button class="btn-delete" onclick="removeAdmin('${u.uid}', '${u.email}')">ê¶Œí•œ íšŒìˆ˜</button>
                            </td>
                        </tr>
                    `;
                }).join('');

            } catch (error) {
                console.error('ê´€ë¦¬ì ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
                document.getElementById('adminListBody').innerHTML =
                    '<tr><td colspan="5" style="padding:20px; text-align:center; color:red;">ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨</td></tr>';
            }
        }

        // ëª¨ë‹¬ ì—´ê¸°
        window.openAdminModal = function() {
            document.getElementById('adminInviteModal').style.display = 'block';
            document.getElementById('targetEmail').value = '';
        };

        // ëª¨ë‹¬ ë‹«ê¸°
        window.closeAdminModal = function() {
            document.getElementById('adminInviteModal').style.display = 'none';
        };

        // ê¶Œí•œ ë¶€ì—¬
        window.promoteUser = async function() {
            const email = document.getElementById('targetEmail').value.trim();
            const role = document.getElementById('targetRole').value;

            if (!email) {
                alert('ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (!confirm(`${email}ì—ê²Œ ${role} ê¶Œí•œì„ ë¶€ì—¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                return;
            }

            try {
                // ì´ë©”ì¼ë¡œ ì‚¬ìš©ì ì°¾ê¸°
                const response = await users.getAll();
                const allUsers = response.users || [];
                const targetUser = allUsers.find(u => u.email === email);

                if (!targetUser) {
                    alert('í•´ë‹¹ ì´ë©”ì¼ì˜ ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                // ê¶Œí•œ ë³€ê²½
                await users.update(targetUser.uid, { role: role });

                alert('ê¶Œí•œì´ ë¶€ì—¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
                closeAdminModal();
                await loadAdminList();

            } catch (error) {
                console.error('ê¶Œí•œ ë¶€ì—¬ ì‹¤íŒ¨:', error);
                alert('ê¶Œí•œ ë¶€ì—¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        };

        // ê´€ë¦¬ì ê¶Œí•œ íšŒìˆ˜
        window.removeAdmin = async function(uid, email) {
            if (!confirm(`${email}ì˜ ê´€ë¦¬ì ê¶Œí•œì„ íšŒìˆ˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n(ì¼ë°˜ íšŒì›ìœ¼ë¡œ ë³€ê²½ë©ë‹ˆë‹¤)`)) {
                return;
            }

            try {
                // owner ì—­í• ë¡œ ë³€ê²½ (ì¼ë°˜ íšŒì›)
                await users.update(uid, { role: 'owner' });

                alert('ê¶Œí•œì´ íšŒìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.');
                await loadAdminList();

            } catch (error) {
                console.error('ê¶Œí•œ íšŒìˆ˜ ì‹¤íŒ¨:', error);
                alert('ê¶Œí•œ íšŒìˆ˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        };

        window.handleLogout = async function() {
            try {
                await auth.logout();
                location.href = "/";
            } catch (error) {
                console.error('ë¡œê·¸ì•„ì›ƒ ì—ëŸ¬:', error);
            }
        };
    </script>

</body>
</html>